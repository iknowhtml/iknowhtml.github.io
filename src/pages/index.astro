---
import Button from "../components/Button.astro";
---

<style>
  @font-face {
    font-family: "BB";
    src: url("/fonts/BB-Regular.woff2") format("woff2");
  }
  @font-face {
    font-family: "BB";
    src: url("/fonts/BB-CondBold.woff2") format("woff2");
    font-weight: bold;
    font-style: normal;
  }

  :root {
    --text-shadow-color: rgba(114, 117, 120, 0.1);
  }
</style>

<script>
  const video = document.querySelector("video");

  if (video) {
    const applyRandomPlaybackRate = () => {
      setTimeout(
        () => {
          video.playbackRate = Number((5 * Math.random()).toFixed(1));
          applyRandomPlaybackRate();
        },
        Math.round(Math.random() * 750)
      );
    };

    applyRandomPlaybackRate();

    const applyRandomEffect = (effects: string[], lastRandomEffect = "") => {
      setTimeout(
        () => {
          video.className = video.className.replace(lastRandomEffect, "");

          lastRandomEffect =
            effects[Math.floor(Math.random() * effects.length)];

          if (lastRandomEffect !== "") {
            video.classList.add(lastRandomEffect);
          }

          applyRandomEffect(effects, lastRandomEffect);
        },
        Math.round(Math.random() * 500)
      );
    };
    applyRandomEffect([
      "",
      "invert",
      "grayscale",
      "scale-x-[-1]",
      "scale-y-[-1]",
    ]);
  }

  const heroContent = document.getElementById("hero-content");

  const updateTranslation = () => {
    if (heroContent && video) {
      const rect = video.getBoundingClientRect();
      const viewportHeight = window.innerHeight;

      // Calculate the amount the video is outside the viewport
      const amountOutOfView = Math.max(
        0,
        rect.top < 0 ? -rect.top : rect.bottom - viewportHeight
      );

      // Apply the translation to the h2 element
      heroContent.style.transform = `translateY(-${amountOutOfView * 0.5}px)`;
    }
  };

  // Update the translation when scrolling or resizing
  window.addEventListener("scroll", updateTranslation);
  window.addEventListener("resize", updateTranslation);
  updateTranslation(); // Initial call to set the translation
</script>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, height=device-height, initial-scale=1"
    />
    <title>高 (暁/晓)裕 | iknowhtml | (1993-2093)</title>
    <meta
      name="description"
      content="Aki Gao is Staff Software Engineer with 8+ years of experience with a passion for solving difficult technical problems, delivering delightful products, and leading high performing engineering teams. Aki also ❤️s Balenciaga."
    />
    <meta
      name="keywords"
      content="aki gao, software engineer, web3, typescript, blockchain, cryptocurrency, balenciaga"
    />
  </head>
  <body>
    <main class="h-screen overflow-clip">
      <h1
        class="font-bold
      uppercase text-[22px] py-[5px] text-center tracking-wider border-b-[1px]
      border-b-black"
      >
        <a href="https://www.balenciaga.com/">21ciaga</a>
      </h1>
      <h2
        class="font-bold uppercase text-center text-[24px] py-[60px]
      tracking-wider"
      >
        高 (暁/晓)裕 | iknowhtml | (1993-2093)
      </h2>
      <div class="relative w-full">
        <video
          src="/media/no-one-knows-what-it-means.webm"
          autoplay
          playsinline
          loop
          muted
          class="w-full h-auto"></video>
        <div
          id="hero-content"
          class="absolute flex
      flex-col items-center justify-center inset-0 gap-4 object-cover"
        >
          <h2
            class="uppercase text-white text-3xl"
            style="text-shadow: -1px -1px 0
      var(--text-shadow-color), 1px -1px 0 var(--text-shadow-color), -1px 1px 0
      var(--text-shadow-color), 1px 1px 0 var(--text-shadow-color);"
          >
            "No one knows what it means, but it's provocative."
          </h2>
          <div class="flex gap-4">
            <Button href="https://www.linkedin.com/in/iknowhtml"
              >LinkedIn</Button
            >
            <Button href="https://www.github.com/iknowhtml">Github</Button>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
